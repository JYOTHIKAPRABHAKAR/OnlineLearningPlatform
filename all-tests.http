### BASE URL
@baseUrl = http://localhost:3000

### =====================
### AUTHENTICATION
### =====================

# Register Learner
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "email": "testlearner{{timestamp}}@example.com",
  "password": "TestPass123",
  "firstName": "Test",
  "lastName": "Learner",
  "targetExam": "JEE Main",
  "preferredLanguage": "English",
  "phone": "+91-9876543210"
}

# Register Educator
POST {{baseUrl}}/api/auth/educator/register
Content-Type: application/json

{
  "email": "testeducator{{timestamp}}@example.com",
  "password": "TestPass123",
  "firstName": "Test",
  "lastName": "Educator",
  "bio": "Experienced educator with 10+ years of teaching",
  "subjects": "Mathematics,Physics",
  "experience": 10,
  "qualification": "Ph.D. Mathematics, IIT Delhi"
}

# Login as learner (using seeded data)
# @name loginLearner
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "john.doe@example.com",
  "password": "password123"
}

# Login as educator (using seeded data)
# @name loginEducator
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "prof.kumar@example.com",
  "password": "password123"
}

### Set tokens
@learnerToken = {{loginLearner.response.body.data.token}}
@educatorToken = {{loginEducator.response.body.data.token}}

### =====================
### COURSES
### =====================

# Browse courses
GET {{baseUrl}}/api/courses

# Get course details
GET {{baseUrl}}/api/courses/1

# Enroll in course
POST {{baseUrl}}/api/courses/1/enroll
Authorization: Bearer {{learnerToken}}

# Get course progress
GET {{baseUrl}}/api/courses/1/progress
Authorization: Bearer {{learnerToken}}

# Get course lessons
GET {{baseUrl}}/api/courses/1/lessons
Authorization: Bearer {{learnerToken}}

# Get course tests
GET {{baseUrl}}/api/courses/1/tests
Authorization: Bearer {{learnerToken}}

# Get course study materials
GET {{baseUrl}}/api/materials/course/1
Authorization: Bearer {{learnerToken}}

### =====================
### LESSONS
### =====================

# Get lesson details
GET {{baseUrl}}/api/lessons/1
Authorization: Bearer {{learnerToken}}

# Update lesson progress
POST {{baseUrl}}/api/lessons/1/progress
Authorization: Bearer {{learnerToken}}
Content-Type: application/json

{
  "watchedDuration": 1800,
  "totalDuration": 2700,
  "completionStatus": "in_progress"
}

# Save lesson notes
POST {{baseUrl}}/api/lessons/1/notes
Authorization: Bearer {{learnerToken}}
Content-Type: application/json

{
  "note": "Important concept about algebra",
  "timestamp": 120
}

# Get lesson notes
GET {{baseUrl}}/api/lessons/1/notes
Authorization: Bearer {{learnerToken}}

### =====================
### TESTS
### =====================

# Get tests for a course
GET {{baseUrl}}/api/tests?courseId=1&type=mock_test
Authorization: Bearer {{learnerToken}}

# Start a test
POST {{baseUrl}}/api/tests/1/start
Authorization: Bearer {{learnerToken}}

# Submit test answers
POST {{baseUrl}}/api/tests/session_001/submit
Authorization: Bearer {{learnerToken}}
Content-Type: application/json

{
  "answers": [
    { "questionId": 1, "selectedOption": "4" },
    { "questionId": 2, "selectedOption": "wrong" },
    { "questionId": 3, "selectedOption": "3xÂ²" }
  ],
  "timeSpent": 180
}

# Get test results
GET {{baseUrl}}/api/tests/session_001/results
Authorization: Bearer {{learnerToken}}

# Get user's test history
GET {{baseUrl}}/api/tests/history?limit=10
Authorization: Bearer {{learnerToken}}

### =====================
### DOUBTS
### =====================

# Post a doubt 1
POST {{baseUrl}}/api/doubts
Authorization: Bearer {{learnerToken}}
Content-Type: application/json

{
  "courseId": 1,
  "lessonId": 1,
  "question": "Why is acceleration constant in free fall?",
  "attachments": ["http://local"]
}

# Post a doubt 2
POST {{baseUrl}}/api/doubts
Authorization: Bearer {{learnerToken}}
Content-Type: application/json

{
  "courseId": 1,
  "lessonId": 1,
  "question": "What is Newton's second law?",
  "attachments": ["http://local2"]
}

# Get my doubts
GET {{baseUrl}}/api/doubts/my
Authorization: Bearer {{learnerToken}}

### =====================
### REVIEWS
### =====================

# Post a course review
POST {{baseUrl}}/api/reviews/courses/1/review
Authorization: Bearer {{learnerToken}}
Content-Type: application/json

{
  "rating": 5,
  "title": "Excellent course!",
  "comment": "The explanations are very clear and the practice questions are helpful."
}

# Get course reviews
GET {{baseUrl}}/api/courses/1/reviews

### =====================
### SEARCH
### =====================

# Global search
GET {{baseUrl}}/api/search?q=physics
Authorization: Bearer {{learnerToken}}

# Search educators
GET {{baseUrl}}/api/educators?subject=Physics&rating=4.5
Authorization: Bearer {{educatorToken}}

# Search lessons
GET {{baseUrl}}/api/lessons/course/1/free

### =====================
### SUBSCRIPTIONS
### =====================

# Purchase subscription
POST {{baseUrl}}/api/subscriptions/purchase
Authorization: Bearer {{learnerToken}}
Content-Type: application/json

{
  "planId": 1,
  "paymentMethod": "credit_card",
  "couponCode": "DISCOUNT10"
} 